[
  {
    "objectID": "index.html#plan",
    "href": "index.html#plan",
    "title": "Le format de donn√©es Parquet",
    "section": "Plan",
    "text": "Plan\n\nContexte\nPourquoi le format Parquet ?\nL‚Äô√©cosyst√®me Parquet\nD√©monstration"
  },
  {
    "objectID": "index.html#le-recensement-de-la-population",
    "href": "index.html#le-recensement-de-la-population",
    "title": "Le format de donn√©es Parquet",
    "section": "Le recensement de la population",
    "text": "Le recensement de la population\n\nMission historique de l‚ÄôInsee depuis 1946\n\nL‚ÄôInsee organise, les communes r√©alisent la collecte\n\n\n\n\nUne source d‚Äôutilit√© publique :\n\nPopulations l√©gales: dotations de l‚Äô√âtat aux communes, organisation des scrutins, √©quipements publics, etc.\nRecherche: caract√©ristiques socio-d√©mographiques, mobilit√©s‚Ä¶\n\n\n\n\n\n\n\n\nEnqu√™tes annuelles de recensement (EAR) depuis 2004\n\n\n\nPour une commune de moins de 10 000 habitants:\n\nCollecte exhaustive une fois tous les 5 ans.\n\nPour une commune de plus de 10 000 habitants:\n\nChaque ann√©e, 8% des logements sont recens√©s ;\nLe r√©sultat du recensement est calcul√© √† partir des 5 derni√®res ann√©es (=40% logements)\n\n\nDocumentation technique sur le recensement"
  },
  {
    "objectID": "index.html#une-diffusion-sous-plusieurs-formes",
    "href": "index.html#une-diffusion-sous-plusieurs-formes",
    "title": "Le format de donn√©es Parquet",
    "section": "Une diffusion sous plusieurs formes",
    "text": "Une diffusion sous plusieurs formes\n\nDiffusion sur insee.fr sous plusieurs formes:\n\nPages ‚Äúdynamiques‚Äù sur insee.fr\nExports d‚Äôagr√©gats depuis statistiques-locales.insee.fr/\nDes donn√©es, des cartes, des publications, etc..\n\n\n\n\nMais beaucoup de gestes manuels pour obtenir un seul agr√©gat\n\n\n\n\nUne information parfois difficile √† trouver sur le site de l‚ÄôInsee"
  },
  {
    "objectID": "index.html#une-diffusion-sous-plusieurs-formes-1",
    "href": "index.html#une-diffusion-sous-plusieurs-formes-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Une diffusion sous plusieurs formes",
    "text": "Une diffusion sous plusieurs formes\n\nLes fichiers agr√©g√©s\n\n\n\nStructure type: une ligne par commune ou IRIS\n\n\n\nTaille de chaque fichier relativement raisonnable\n\nCSV g√©n√©ralement de quelques Mo, jusqu‚Äô√† 150 Mo"
  },
  {
    "objectID": "index.html#une-diffusion-sous-plusieurs-formes-2",
    "href": "index.html#une-diffusion-sous-plusieurs-formes-2",
    "title": "Le format de donn√©es Parquet",
    "section": "Une diffusion sous plusieurs formes",
    "text": "Une diffusion sous plusieurs formes\n\nLes micro-donn√©es anonymis√©es\n\n\nStructure type: une ligne par observation\n\nUn logement, un individu‚Ä¶\n\n\n\n\nPermet de construire d‚Äôautres croisements que ceux propos√©s sur insee.fr\n\n\n\n\n\n\n\n\n\nUn format destin√© √† des utilisateurs avanc√©s\n\n\n\nUne source riche mais des pr√©cautions d‚Äôemploi √† respecter:\n\nPond√©rations √† prendre en compte\nInterpr√©tation des petits effectifs‚Ä¶\n\nDemande une certaine expertise"
  },
  {
    "objectID": "index.html#d√©fi",
    "href": "index.html#d√©fi",
    "title": "Le format de donn√©es Parquet",
    "section": "D√©fi",
    "text": "D√©fi\n\nCe sont des fichiers tr√®s volumineux\n\nJusqu‚Äô√† 100 variables et 25 millions de lignes\nFichier CSV jusqu‚Äô√† 5 Go\n\n\n\n\nPour l‚ÄôInsee : complexes √† produire et valider avant diffusion\n\n\n\n\nPour l‚Äôutilisateur.trice : complexes √† t√©l√©charger, stocker et exploiter"
  },
  {
    "objectID": "index.html#solution-historique",
    "href": "index.html#solution-historique",
    "title": "Le format de donn√©es Parquet",
    "section": "Solution historique",
    "text": "Solution historique\n\nDiffusion zipp√©e (CSV) ou format DBase (format propri√©taire)\n\nD√©coupage en fichiers par grandes zones de r√©gions"
  },
  {
    "objectID": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion",
    "href": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion",
    "title": "Le format de donn√©es Parquet",
    "section": "Une source id√©ale pour innover dans la diffusion",
    "text": "Une source id√©ale pour innover dans la diffusion\n\nMont√©e en puissance du format Parquet pour les usages internes √† l‚ÄôInsee:\n\nPourquoi ne pas offrir le m√™me confort √† l‚Äôexterne ?\n\n\n\n\nUne demande d‚Äôutilisateurs.trices averti.e.s\n\nPar exemple Eric Mauvi√®re"
  },
  {
    "objectID": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion-1",
    "href": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Une source id√©ale pour innover dans la diffusion",
    "text": "Une source id√©ale pour innover dans la diffusion\n\nPublication en octobre 2023 des donn√©es et d‚Äôun guide d‚Äôutilisation"
  },
  {
    "objectID": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion-2",
    "href": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion-2",
    "title": "Le format de donn√©es Parquet",
    "section": "Une source id√©ale pour innover dans la diffusion",
    "text": "Une source id√©ale pour innover dans la diffusion\n\nUn accueil enthousiaste des utilisateurs.trices"
  },
  {
    "objectID": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion-3",
    "href": "index.html#une-source-id√©ale-pour-innover-dans-la-diffusion-3",
    "title": "Le format de donn√©es Parquet",
    "section": "Une source id√©ale pour innover dans la diffusion",
    "text": "Une source id√©ale pour innover dans la diffusion\n\nD‚Äôautres institutions l‚Äôutilisent maintenant pour leur diffusion\n\n\n\n\n\nStatistiques sur longue p√©riode des crimes et d√©lis"
  },
  {
    "objectID": "index.html#parquet-cest-quoi",
    "href": "index.html#parquet-cest-quoi",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet : c‚Äôest quoi ?",
    "text": "Parquet : c‚Äôest quoi ?\n\nUn format de donn√©es adapt√©‚Ä¶\n\nAux donn√©es volumineuses ;\nAux donn√©es complexes (exemple: 01004 pour le code commune d‚ÄôAmb√©rieu-en-Bugey)\n\n\n\n\nUn format de donn√©es opensource bien int√©gr√©:\n\nA l‚Äô√©cosyst√®me R, Python et Observable"
  },
  {
    "objectID": "index.html#parquet-pourquoi",
    "href": "index.html#parquet-pourquoi",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet : pourquoi ?",
    "text": "Parquet : pourquoi ?\n\nFormat l√©ger, tr√®s compress√©:\n\nEntre 5 et 20 fois plus l√©ger qu‚Äôun CSV\nPas de perte d‚Äôefficacit√© en lecture\n\n\n\n\n\n\n\n\n\n\nExemple: recensement de la population\n\n\n\n20 millions de lignes, 88 colonnes\n\nCSV: &gt; 5Go\nParquet: 508Mo\n\n\n\n\n\n\n\n\n\n\n\n\nExemple: statistiques de la d√©linquance\n\n\n\n3.5 millions de lignes:\n\nCSV: 400Mo\nParquet: 11Mo"
  },
  {
    "objectID": "index.html#le-csv-en-apparence-pratique",
    "href": "index.html#le-csv-en-apparence-pratique",
    "title": "Le format de donn√©es Parquet",
    "section": "Le CSV: en apparence pratique",
    "text": "Le CSV: en apparence pratique\n\n\n\n\nFacile √† lire, facile √† ouvrir, mais\n\n\n\n\n\n\n\n\n\n\nProbl√®me: il faut scanner tout le fichier pour avoir une seule colonne\n\n\n\nLent en lecture, pas compress√©\nProbl√®me pour deviner le type d‚Äôune variable\nM√™me si on ne veut que certaines colonnes, il faut lire tout le fichier"
  },
  {
    "objectID": "index.html#parquet-un-format-orient√©-colonne",
    "href": "index.html#parquet-un-format-orient√©-colonne",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: un format orient√© colonne",
    "text": "Parquet: un format orient√© colonne\n\n\nPlus pratique pour n‚Äôouvrir qu‚Äôun sous-ensemble de variables ;\n\nPas besoin de scanner tout le fichier pour √©tudier quelques variables ;"
  },
  {
    "objectID": "index.html#parquet-quels-avantages",
    "href": "index.html#parquet-quels-avantages",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet : quels avantages ?",
    "text": "Parquet : quels avantages ?\n\n\nFormat libre, open source, et ind√©pendant du langage ;\n\n\n\nPlus de confort pour les utilisateurs:\n\nDes requ√™tes plus rapides et efficaces (seulement les donn√©es n√©cessaires sont lues)\nDes donn√©es conformes √† la mise √† disposition par le producteur (plus de probl√®me de codes communes‚Ä¶)"
  },
  {
    "objectID": "index.html#parquet-quels-usages",
    "href": "index.html#parquet-quels-usages",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet : quels usages ?",
    "text": "Parquet : quels usages ?\n\nFormat privil√©gi√© pour la mise √† disposition de donn√©es internes √† l‚ÄôInsee:\n\nMoins d‚Äôasym√©tries entre utilisateurs et producteurs.\n\n\n\n\n\n\n\n\nPremi√®res diffusions √† l‚Äôexterne\n\n\n\nBureaux de votes du r√©pertoire √©lectoral unique (REU):\nRecensement de la population (RP)\nPlus r√©cemment, la base permanente des √©quipements (BPE)"
  },
  {
    "objectID": "index.html#parquet-quels-usages-1",
    "href": "index.html#parquet-quels-usages-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet : quels usages ?",
    "text": "Parquet : quels usages ?\n\nviewof source = Inputs.radio([\n  \"Recensement\", \"R√©pertoire √©lectoral unique\"\n], {value: \"Recensement\"})\n\n\n\n\n\n\n\n\nInputs.table(data)\n\n\n\n\n\n\n\ndata = (source == \"Recensement\") ? rp : reu\n\n\n\n\n\n\n\ndb = DuckDBClient.of({})\n\nrp = db.query(\n  \"SELECT AGED, CATL, SEXE, CANTVILLE, IPONDI FROM read_parquet('https://static.data.gouv.fr/resources/recensement-de-la-population-fichiers-detail-individus-localises-au-canton-ou-ville-2020-1/20231023-122841/fd-indcvi-2020.parquet') LIMIT 5\"\n)\nreu = db.query(\n  \"SELECT geo_adresse, id_brut_bv_reu FROM read_parquet('https://static.data.gouv.fr/resources/bureaux-de-vote-et-adresses-de-leurs-electeurs/20230626-135723/table-adresses-reu.parquet') LIMIT 5\"\n)"
  },
  {
    "objectID": "index.html#pourquoi-duckdb",
    "href": "index.html#pourquoi-duckdb",
    "title": "Le format de donn√©es Parquet",
    "section": "Pourquoi DuckDB ?",
    "text": "Pourquoi DuckDB ?\n\nParquet ne r√©sout pas tout:\n\nL‚Äôespace disque est optimis√©\nLes donn√©es d√©compress√©es doivent passer en RAM\n\n\n‚ùìÔ∏è Comment analyser ces donn√©es sur un PC avec 8 GB de RAM ?"
  },
  {
    "objectID": "index.html#pourquoi-duckdb-1",
    "href": "index.html#pourquoi-duckdb-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Pourquoi DuckDB ?",
    "text": "Pourquoi DuckDB ?"
  },
  {
    "objectID": "index.html#pourquoi-duckdb-2",
    "href": "index.html#pourquoi-duckdb-2",
    "title": "Le format de donn√©es Parquet",
    "section": "Pourquoi DuckDB ?",
    "text": "Pourquoi DuckDB ?\n\n\n\nDuckDB est un utilitaire open source\n\nUn logiciel en ligne de commande tout simple (20Mo)‚Ä¶\nDes librairies ,  et Observable pour simplifier l‚Äôusage\nRequ√™tes SQL mais aussi int√©gration tidyverse pour \n\n\n\n\n\n\n\n\n\nDuckDB est tr√®s efficace:\n\nMoteur SQL enrichi avec des fonctions tr√®s pratiques pour l‚Äôanalyse\nOptimisations automatiques\nVisualisations sans ex√©cuter sur toute la base\n\n\n\n\nüí° Les avantages du monde des bases de donn√©es sans ses inconv√©nients"
  },
  {
    "objectID": "index.html#reproductibilit√©-des-exemples",
    "href": "index.html#reproductibilit√©-des-exemples",
    "title": "Le format de donn√©es Parquet",
    "section": "Reproductibilit√© des exemples",
    "text": "Reproductibilit√© des exemples\n\n\n\nPlateforme de data science d√©velopp√©e par l‚ÄôInsee\n\nEnvironnements standardis√©s , \nAccessible aux chercheurs.euses pour l‚Äôenseignement üòâ\n\n\n\n\nEnvironnements pr√©configur√©s lan√ßables en 1 clic:\n\n\n\n\n\n\n\n\n\n\n\n\n\nAstuce\n\n\nSi vous avez un compte, n‚Äôh√©sitez pas √† essayer les exemples pr√©sent√©s en live !\n\n\n\n\n\n\nAtelier tuto@mate (retour √† la page principale de ce site)"
  }
]